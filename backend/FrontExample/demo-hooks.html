<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script crossorigin src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
<h1>React Hooks</h1>
<div id="app"></div>
<!--<script type="text/babel">-->
<!--    class App extends React.Component {-->
<!--        state = {-->
<!--            count: 0-->
<!--        }-->

<!--        render() {-->
<!--            return (-->
<!--                <div>-->
<!--                    <h2>Class based APP</h2>-->
<!--                    <h2>Clicked {this.state.count} times</h2>-->
<!--                    <button onClick={-->
<!--                        () => {-->
<!--                            this.setState(pre => ({count: pre.count + 10}))-->
<!--                        }-->
<!--                    }>+ 10-->
<!--                    </button>-->
<!--                </div>-->
<!--            )-->
<!--        }-->

<!--        componentDidUpdate() {-->
<!--            console.log(`componentDidUpdate, the count is ${this.state.count}`);-->
<!--        }-->

<!--        componentDidMount() {-->
<!--            console.log(`componentDidMount, the count is ${this.state.count}`);-->
<!--        }-->
<!--    }-->

<!--    function Haha() {-->
<!--        React.useEffect(() => {-->
<!--            console.log("I am haha");-->

<!--            const willUnmount =  () => {-->
<!--                console.log("Bye bye...")-->
<!--            }-->
<!--            return willUnmount;-->
<!--        }, []);-->

<!--        return <div>this is haha</div>-->
<!--    }-->

<!--    function FnApp1() {-->
<!--        const [count, setCount] = React.useState(0);-->
<!--        const [step, setStep] = React.useState(1);-->
<!--        const [hidden, setHidden] = React.useState(false)-->

<!--        //console.log("start");-->
<!--        React.useEffect(() => {-->
<!--            console.log("effect hook is called, the count is:", count);-->
<!--            setTimeout(() => {-->
<!--                setCount(count + 1)-->
<!--            }, 1000)-->
<!--        }, [step]);-->

<!--        //console.log("render");-->

<!--        return (-->
<!--            <div>-->
<!--                <h2>Clicked {count} times!</h2>-->
<!--                <h3>Step: {step}</h3>-->
<!--                <button onClick={-->
<!--                    () => setCount(count + 10)-->
<!--                }>click + 10</button>-->
<!--                <button onClick={() => setStep(step + 2)}>step + 2</button>-->
<!--                <button onClick={() => setHidden(!hidden)}>show / hide</button>-->

<!--                {-->
<!--                    hidden ? <Haha /> : null-->
<!--                }-->
<!--            </div>-->
<!--        )-->
<!--    }-->

<!--    ReactDOM.render(-->
<!--        <div>-->
<!--            <FnApp1 />-->
<!--        </div>,-->
<!--        document.getElementById("app")-->
<!--    )-->
<!--</script>-->

<script type="text/babel">
    // 1. useState
    class App extends React.Component {
        state = {
            count: 0,
        }

        render() {
            return (
                <div>
                    <p>Clicked {this.state.count} time(s)!</p>
                    <button onClick={this.onClickChange}>click me</button>
                </div>
            )
        }

        onClickChange = () =>
            this.setState(preState => ({count: preState.count + 1}))

    }

    function FnApp() {
        //console.log(React.useState());
        const [count, setCount] = React.useState(10);
        const [hidden, setHidden] = React.useState(false);
        const [person, setPerson] = React.useState({name: "Peter", age: 20});
        //console.log('count -> ', count);
        //console.log('setCount -> ', setCount);


        return (
            <div>
                <h3>I am Fn App.</h3>
                <p>Clicked {count} time(s)!</p>
                <button onClick={() => {
                    setCount(count + 1)
                    setPerson(pre => {
                        console.log(pre)
                        return {
                            ...pre,
                            age: pre.age + 1}
                    })
                }}>click me</button>
                <button onClick = {() => setHidden(!hidden) }>show / hide</button>
                {
                    hidden ? <h3>haha</h3> : null
                }
                <p>My name is: {person.name}, I am {person.age} years old</p>
            </div>
        )
    }

    ReactDOM.render(
        <FnApp />,
        document.getElementById("app")
    )
</script>
</body>
</html>